{% extends "base.html" %}

{% block title %}HackTJ Ops · Dashboard{% endblock %}

{% block content %}
  <section class="hero">
    <div style="display:flex; justify-content:space-between; flex-wrap:wrap; gap:1.25rem;">
      <div>
        <p class="muted">HackTJ Judging &amp; Operations</p>
        <h1 style="margin-bottom:0.4rem;">Welcome to HackTJ 2026</h1>
        <p class="muted">Your centralized hub for schedules, links, and updates.</p>
      </div>
      <div>
        <p class="muted">Signed in as</p>
        <div class="pill">{{ role_display }}</div>
        {% if team %}
          <p class="muted" style="margin-top:0.35rem;">Team: {{ team.team_name }}</p>
        {% endif %}
      </div>
    </div>
  </section>

  {% if show_project_sections and project %}
    <section class="card" id="project-submissions">
      <h2>Project submissions</h2>
      <p class="muted" style="margin-top:0;">
        Manage both forms from your project page. Deadlines are strict — please submit ahead of time.
      </p>
      <ul style="margin:0; padding-left:1.25rem;">
        <li>
          <strong>Category form</strong> — due {{ category_deadline|date:"M d, Y · H:i" }} (11:30 PM · March 7).
          <a href="{% url 'project_detail' project.id %}#category-form">Open form</a>
        </li>
        <li>
          <strong>Full project submission</strong> — due {{ submission_deadline|date:"M d, Y · H:i" }} (8:00 AM · March 8).
          <a href="{% url 'project_detail' project.id %}#submission-form">Open form</a>
        </li>
      </ul>
      <div style="margin-top:0.75rem;">
        <a class="btn" href="{% url 'project_detail' project.id %}">Go to project page</a>
      </div>
    </section>
  {% endif %}

  <section class="card">
    <h2>Basic event info</h2>
    <ul style="margin:0; padding-left:1.25rem;">
      {% for item in basic_event_info %}
        <li><strong>{{ item.label }}:</strong> {{ item.value }}</li>
      {% endfor %}
    </ul>
    {% if site_content and site_content.wifi_name %}
      <div style="margin-top:1rem; padding:0.75rem; border:1px dashed #d3d3d3; border-radius:0.5rem; background:#fff;">
        <strong>Wi‑Fi</strong>
        <div><span class="muted">Network:</span> {{ site_content.wifi_name }}</div>
        {% if site_content.wifi_password %}
          <div><span class="muted">Password:</span> {{ site_content.wifi_password }}</div>
        {% endif %}
      </div>
    {% endif %}
  </section>

  <section class="card">
    <h2>Useful links</h2>
    {% if useful_links %}
      <ul style="margin:0; padding-left:1.25rem;">
        {% for link in useful_links %}
          <li>
            <strong>{{ link.title }}:</strong>
            <a href="{{ link.url }}" target="_blank" rel="noopener">{{ link.url }}</a>
            {% if link.description %}
              <span class="muted">— {{ link.description }}</span>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="muted">No links available right now.</p>
    {% endif %}
  </section>

  {% if site_content %}
    <section class="card">
      <h2>Additional updates</h2>
      {% if site_content_files.all %}
        <iframe
          title="Additional updates"
          src="{{ site_content_files.all }}"
          style="width:100%; height:320px; border:1px solid #d3d3d3; border-radius:0.5rem;"
        ></iframe>
      {% else %}
        <p class="muted">No additional updates right now.</p>
      {% endif %}
    </section>

    {% if role == "team" and site_content_files.team %}
      <section class="card">
        <h2>Team updates</h2>
        <iframe
          title="Team updates"
          src="{{ site_content_files.team }}"
          style="width:100%; height:320px; border:1px solid #d3d3d3; border-radius:0.5rem;"
        ></iframe>
      </section>
    {% endif %}

    {% if role == "judge" and site_content_files.judge %}
      <section class="card">
        <h2>Judge updates</h2>
        <iframe
          title="Judge updates"
          src="{{ site_content_files.judge }}"
          style="width:100%; height:320px; border:1px solid #d3d3d3; border-radius:0.5rem;"
        ></iframe>
      </section>
    {% endif %}

    {% if role == "hacktj" and site_content_files.hacktj %}
      <section class="card">
        <h2>HackTJ team updates</h2>
        <iframe
          title="HackTJ team updates"
          src="{{ site_content_files.hacktj }}"
          style="width:100%; height:320px; border:1px solid #d3d3d3; border-radius:0.5rem;"
        ></iframe>
      </section>
    {% endif %}

    {% if role == "admin" and site_content_files.admin %}
      <section class="card">
        <h2>Admin updates</h2>
        <iframe
          title="Admin updates"
          src="{{ site_content_files.admin }}"
          style="width:100%; height:320px; border:1px solid #d3d3d3; border-radius:0.5rem;"
        ></iframe>
      </section>
    {% endif %}

    {% if role == "volunteer" and site_content_files.volunteer %}
      <section class="card">
        <h2>Volunteer updates</h2>
        <iframe
          title="Volunteer updates"
          src="{{ site_content_files.volunteer }}"
          style="width:100%; height:320px; border:1px solid #d3d3d3; border-radius:0.5rem;"
        ></iframe>
      </section>
    {% endif %}
  {% endif %}

  {% if role == "admin" %}
    <section class="card">
      <h2>Announcements</h2>
      <p class="muted">Instructions for creating quick‑upload HTML.</p>
      <a class="btn" href="https://docs.google.com/document/d/1KWtkYOXRTvHH4bGxfA0IXeoO1WTScmfZCNtxGTZOEFY/edit?tab=t.ivq6pqblm5aj" target="_blank" rel="noopener">Open instructions</a>
    </section>
  {% endif %}

  <section class="card">
    <h2>Schedule &amp; deadlines</h2>
    <p class="muted">Itinerary · Weekend schedule · March 7–8, 2026 · Cvent HQ · Tysons, VA</p>
    <div style="display:flex; flex-direction:column; gap:1rem;">
      <div>
        <h3 style="margin-bottom:0.4rem;">Day 1 · Saturday · March 7</h3>
        <ul style="margin:0; padding-left:1.25rem;">
          <li>Kickoff + Overnight Sprint — 15 hours on-site</li>
          <li>9:00 AM — 11:00 AM · Student Check-In + Sponsorship fair</li>
          <li>11:00 AM · Opening Ceremony &amp; Doors Close</li>
          <li>11:30 AM · Hacking Begins</li>
          <li>11:30 AM — 12:00 PM · Team Building</li>
          <li>11:30 AM — 12:00 PM · Resources &amp; Q&amp;A for Beginners</li>
          <li>1:00 PM · Check-In Form Due</li>
          <li>1:00 PM — 2:00 PM · Lunch</li>
          <li>2:00 PM — 6:00 PM · Workshops</li>
          <li>6:00 PM · Workshops End</li>
          <li>7:00 PM — 8:00 PM · Dinner</li>
          <li>8:00 PM — 9:00 PM · Women in Tech Panel</li>
          <li>11:30 PM · Team Name + Category Form Due</li>
        </ul>
      </div>
      <div>
        <h3 style="margin-bottom:0.4rem;">Day 2 · Sunday · March 8</h3>
        <ul style="margin:0; padding-left:1.25rem;">
          <li>Ship Day! — 12 hours on-site</li>
          <li>12:00 AM · Pizza Served</li>
          <li>2:00 AM · Daylight Savings Shift</li>
          <li>6:00 AM — 7:30 AM · Breakfast</li>
          <li>7:30 AM · Judges Meeting</li>
          <li>8:00 AM · Project Submission Deadline</li>
          <li>8:00 AM · Hacking Ends · Prep for Judging</li>
          <li>8:15 AM — 11:30 AM · Judging</li>
          <li>11:30 AM · Judging Ends &amp; Results</li>
          <li>12:00 PM — 12:30 PM · Closing Ceremony</li>
        </ul>
      </div>
    </div>
  </section>

  {% if show_admin_panel %}
    <section class="card">
      <h2>Admin tools</h2>
      <a class="btn" href="/admin/">Open Django admin</a>
    </section>
  {% endif %}
{% endblock %}
